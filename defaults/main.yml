---
# Общие настройки пакета и службы
tacacs_package_name: tac_plus-ng
tacacs_package_state: present
tacacs_extra_packages:
  - rsync
tacacs_service_name: tac_plus-ng
tacacs_service_state: started
tacacs_manage_service: true

# Настройки каталогов и файлов
tacacs_config_dir: /opt/tac_plus-ng/etc
tacacs_main_config: "{{ tacacs_config_dir }}/tac_plus-ng.cfg"
tacacs_hosts_config: "{{ tacacs_config_dir }}/tac_plus_hosts.cfg"
tacacs_users_config: "{{ tacacs_config_dir }}/tac_plus_users.cfg"
tacacs_shadow_file: "{{ tacacs_config_dir }}/shadow"
tacacs_config_header: "## Generated by Ansible — do not edit manually"
tacacs_binary_path: /opt/tac_plus-ng/sbin/tac_plus-ng

# Параметры блока spawnd
tacacs_listen_port: 49
tacacs_listen_address: 0.0.0.0 # Указать адрес

# Управление установкой
tacacs_install_method: source  # package | source
tacacs_build_dependencies:
  - libpcre2-devel
  - libpcre2
  - gcc
  - make
  - libpcre-devel
  - perl-ldap
tacacs_source_archive: "{{ role_path }}/files/DEVEL.202310061820.tar.bz2"
tacacs_source_checksum: ~
tacacs_source_unpack_dir: /root
tacacs_source_project_dir: "{{ tacacs_source_unpack_dir }}/PROJECTS"
tacacs_source_make_dir: "{{ tacacs_source_project_dir }}/tac_plus-ng"
tacacs_configure_extra_args: ""

# Systemd unit
tacacs_systemd_unit_path: /etc/systemd/system/tac_plus-ng.service
tacacs_source_systemd_daemon: "{{ role_path }}/files/tac_plus-ng.service"

#--------------- LDAP Auth (FreeIPA and AD) -------------------------------
# Общие параметры (обязательны к заполнению)
tacacs_ldap_base_search_1: example-dc01.example.local
tacacs_ldap_base_search_2: example-dc02.example.local
tacacs_ldap_port: 389
tacacs_ldap_bind_user_password: password
# Microsoft (AD)
tacacs_ldap_DC_2: example # example-dc01.example.local
tacacs_ldap_DC_1: local
tacacs_ldap_bind_user_ad: root
# FreeIPA
tacacs_ldap_bind_user_ipa: root # Почем тут две переменных? (Логин во freeIPA след user@pub.mgmt)
tacacs_ldap_freeipa_base_prefix: cn=users,cn=accounts
#--------------- LDAP Auth END(FreeIPA and AD) -------------------------------



# Настройки MAVIS
tacacs_mavis_path: /opt/tac_plus-ng/lib/mavis
tacacs_mavis_ldap_executable: "{{ tacacs_mavis_path }}/mavis_tacplus_ldap.pl"
tacacs_mavis_shadow_executable: "{{ tacacs_mavis_path }}/mavis_tacplus_shadow.pl"

# Режимы авторизации: freeipa, ad, local
tacacs_auth_mode: local
tacacs_config_templates:
  freeipa: tac_plus-ng_FREEIPA.cfg.j2
  ad: tac_plus-ng_INTEGRATION_AD_MICROSOFT.cfg.j2
  local: tac_plus-ng_ONLY_LOCAL_USER.cfg.j2

tacacs_hosts_src: tac_plus_hosts.cfg
tacacs_users_src: tac_plus_users.cfg
tacacs_shadow_src: shadow.txt

tacacs_owner: root
tacacs_group: root
tacacs_config_mode: "0640"
tacacs_shadow_mode: "0600"